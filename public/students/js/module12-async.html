<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Module 12 ‚Äî Asynchronous JavaScript: Callbacks, Promises & Async/Await | Coder & AccoTax</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg:#020617;
      --accent:#38bdf8;
      --accent2:#a855f7;
      --accent3:#22c55e;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --border:#1f2937;
      --code-bg:#020617;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
      background:radial-gradient(circle at top,#0f172a,#020617 55%,#000);
      color:var(--text);
      padding:24px 16px 40px;
      line-height:1.7;
    }
    .page{max-width:1100px;margin:auto;}

    /* HEADER */
    header{
      padding:20px 24px;border-radius:24px;margin-bottom:22px;
      border:1px solid rgba(148,163,184,0.35);
      background:
        radial-gradient(circle at 0 0,rgba(56,189,248,0.18),transparent 55%),
        radial-gradient(circle at 100% 0,rgba(168,85,247,0.25),transparent 50%),
        rgba(15,23,42,0.96);
      display:flex;gap:18px;flex-wrap:wrap;align-items:center;
    }
    .logo-circle{
      width:52px;height:52px;border-radius:50%;
      border:2px solid rgba(56,189,248,0.9);
      background:rgba(15,23,42,0.98);
      display:flex;align-items:center;justify-content:center;
      font-weight:700;letter-spacing:0.1em;font-size:0.72rem;
      box-shadow:0 0 18px rgba(56,189,248,0.6);
    }
    h1{
      font-size:1.9rem;line-height:1.3;
      background:linear-gradient(90deg,#e0f2fe,#f9a8d4,#bfdbfe);
      -webkit-background-clip:text;color:transparent;
      margin-bottom:6px;
    }
    .header-sub{font-size:0.95rem;color:var(--muted);}
    .badge-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;}
    .badge{
      padding:4px 10px;border-radius:999px;
      border:1px solid rgba(148,163,184,0.55);
      background:rgba(15,23,42,0.85);
      font-size:0.7rem;text-transform:uppercase;letter-spacing:0.12em;
    }
    .mode-pill{
      padding:6px 12px;border-radius:999px;border:1px solid rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.85);font-size:0.75rem;min-width:150px;
      text-align:center;color:var(--muted);
    }

    /* MAIN */
    main{display:grid;grid-template-columns:2.2fr 1fr;gap:22px;margin-top:16px;}
    @media(max-width:900px){main{grid-template-columns:1fr;}}

    .card{
      background:rgba(15,23,42,0.97);
      border:1px solid var(--border);border-radius:22px;
      padding:20px;box-shadow:0 18px 45px rgba(0,0,0,0.55);
      margin-bottom:20px;
    }
    h2{color:#dbeafe;font-size:1.1rem;margin-bottom:6px;}
    h3{color:#bfdbfe;margin:14px 0 6px;font-size:1rem;}
    .lead{color:var(--muted);margin-bottom:14px;}
    p{font-size:0.93rem;margin-bottom:8px;}

    ul,ol{margin-left:18px;margin-bottom:10px;font-size:0.93rem;}
    li{margin-bottom:4px;}

    .step-label{
      display:flex;align-items:center;gap:6px;
      font-size:0.78rem;text-transform:uppercase;letter-spacing:0.12em;
      color:var(--accent);margin-bottom:4px;
    }
    .step-dot{
      width:6px;height:6px;border-radius:50%;
      background:var(--accent);box-shadow:0 0 14px rgba(56,189,248,0.9);
    }

    pre{
      background:var(--code-bg);
      border-radius:12px;padding:12px;
      border:1px solid rgba(30,41,59,0.9);
      overflow:auto;margin:10px 0;font-size:0.85rem;
    }
    code{font-family:"Fira Code",Consolas,monospace;}

    .note,.tip,.warning{
      padding:10px 12px;border-radius:12px;font-size:0.84rem;margin:10px 0;
    }
    .note{color:var(--muted);border:1px dashed rgba(148,163,184,0.6);}
    .tip{background:rgba(22,163,74,0.18);border:1px solid rgba(34,197,94,0.7);color:#bbf7d0;}
    .warning{background:rgba(127,29,29,0.38);border:1px solid rgba(248,113,113,0.7);color:#fecaca;}

    .diagram{
      font-family:"Fira Code",Consolas,monospace;
      font-size:0.8rem;
      background:#020617;
      border-radius:12px;
      border:1px solid rgba(30,41,59,0.9);
      padding:10px 12px;
      white-space:pre;
      margin:10px 0;
      color:#e5e7eb;
    }

    .tag-chip{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.5);
      font-size:0.68rem;
      text-transform:uppercase;
      letter-spacing:0.1em;
      color:var(--muted);
      margin-right:4px;
    }

    /* SIDEBAR */
    .side-card{
      background:radial-gradient(circle at top,rgba(56,189,248,0.14),transparent 55%),
      rgba(15,23,42,0.94);
      border-radius:22px;padding:18px;
      border:1px solid rgba(55,65,81,0.9);
      box-shadow:0 22px 50px rgba(0,0,0,0.75);
      margin-bottom:18px;
      font-size:0.9rem;
    }
    .side-card h2{color:#e0f2fe;font-size:1.04rem;margin-bottom:6px;}
    .side-card ul{list-style:none;margin-left:0;color:var(--muted);}
    .side-card li{margin-bottom:6px;font-size:0.9rem;}

    /* FOOTER */
    footer{
      margin-top:28px;padding:18px;border-radius:22px;
      background:linear-gradient(120deg,rgba(15,23,42,0.97),rgba(15,23,42,0.92));
      border:1px solid rgba(55,65,81,0.9);font-size:0.86rem;
    }
    .org-grid{
      display:grid;grid-template-columns:2fr 1.4fr;gap:12px;
    }
    @media(max-width:700px){.org-grid{grid-template-columns:1fr;}}
    .org-name{font-weight:700;}
    .org-sub{color:var(--muted);margin-bottom:6px;}
    footer a{color:var(--accent);text-decoration:none;}
    .org-small{margin-top:8px;font-size:0.76rem;color:#64748b;}
  </style>
</head>

<body>
<div class="page">

  <!-- HEADER -->
  <header>
    <div class="logo-circle">C&A</div>
    <div>
      <h1>Module 12 ‚Äî Asynchronous JavaScript: Callbacks, Promises &amp; Async/Await</h1>
      <p class="header-sub">
        Learn how JavaScript handles time-based operations, network requests, and background tasks
        using callbacks, Promises, async/await, and the event loop. This is the heart of real-world JavaScript.
      </p>
      <div class="badge-row">
        <div class="badge">Advanced</div>
        <div class="badge">Async &amp; Concurrency</div>
        <div class="badge">APIs &amp; fetch()</div>
      </div>
    </div>
    <div class="mode-pill">Dark Mode ¬∑ #020617</div>
  </header>

  <!-- TEST LINKS SECTION (MODULE 12) -->
<div class="card" style="
    margin-top: 20px;
    border: 1px solid rgba(56,189,248,0.35);
    background: radial-gradient(circle at top left, rgba(56,189,248,0.15), transparent 60%),
                radial-gradient(circle at bottom right, rgba(168,85,247,0.15), transparent 60%),
                rgba(15,23,42,0.95);
">

  <h2
    style="font-size:1.4rem; margin-bottom:12px;
           background:linear-gradient(90deg,#38bdf8,#a855f7);
           -webkit-background-clip:text; color:transparent;">
    ‚ú® Test Your Knowledge ‚Äî 100 Questions on Asynchronous JavaScript (Callbacks, Promises, Async/Await)
  </h2>

  <p class="lead" style="margin-bottom:18px; color:#9ca3af;">
    Solve all 4 parts of the <strong>Module-12 Async JavaScript Test Series</strong>.  
    Each test contains <strong>25 MCQs, output questions, and explanations</strong> revealed on click.
  </p>

  <div style="
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
  ">

    <!-- Test 1 -->
    <a href="module12-async-test-part1.html" style="
        text-decoration:none;
        background:rgba(15,23,42,0.9);
        padding:14px;
        border-radius:18px;
        border:1px solid rgba(56,189,248,0.4);
        display:block;
        box-shadow:0 8px 20px rgba(0,0,0,0.55);
        transition:0.25s;"
      onmouseover="this.style.transform='scale(1.03)'; this.style.borderColor='rgba(56,189,248,0.9)'"
      onmouseout ="this.style.transform='scale(1)';   this.style.borderColor='rgba(56,189,248,0.4)'">

      <h3 style="color:#bfdbfe; margin-bottom:6px;">üß™ Test Part 1 ‚Äî Event Loop & Callback Queue</h3>
      <p style="color:#9ca3af; font-size:0.9rem;">Call Stack ¬∑ Microtasks ¬∑ Macrotasks ¬∑ setTimeout</p>
      <div style="margin-top:6px; color:#38bdf8; font-weight:600;">Start Test ‚Üí</div>
    </a>

    <!-- Test 2 -->
    <a href="module12-async-test-part2.html" style="
        text-decoration:none;
        background:rgba(15,23,42,0.9);
        padding:14px;
        border-radius:18px;
        border:1px solid rgba(168,85,247,0.4);
        display:block;
        box-shadow:0 8px 20px rgba(0,0,0,0.55);
        transition:0.25s;"
      onmouseover="this.style.transform='scale(1.03)'; this.style.borderColor='rgba(168,85,247,0.9)'"
      onmouseout ="this.style.transform='scale(1)';   this.style.borderColor='rgba(168,85,247,0.4)'">

      <h3 style="color:#bfdbfe; margin-bottom:6px;">üß™ Test Part 2 ‚Äî Callbacks & Callback Hell</h3>
      <p style="color:#9ca3af; font-size:0.9rem;">Error-first Callbacks ¬∑ Nested Calls ¬∑ Pyramid of Doom</p>
      <div style="margin-top:6px; color:#a855f7; font-weight:600;">Start Test ‚Üí</div>
    </a>

    <!-- Test 3 -->
    <a href="module12-async-test-part3.html" style="
        text-decoration:none;
        background:rgba(15,23,42,0.9);
        padding:14px;
        border-radius:18px;
        border:1px solid rgba(34,197,94,0.4);
        display:block;
        box-shadow:0 8px 20px rgba(0,0,0,0.55);
        transition:0.25s;"
      onmouseover="this.style.transform='scale(1.03)'; this.style.borderColor='rgba(34,197,94,0.9)'"
      onmouseout ="this.style.transform='scale(1)';   this.style.borderColor='rgba(34,197,94,0.4)'">

      <h3 style="color:#bfdbfe; margin-bottom:6px;">üß™ Test Part 3 ‚Äî Promises & Chaining</h3>
      <p style="color:#9ca3af; font-size:0.9rem;">then/catch ¬∑ finally ¬∑ Promise.all/race/allSettled</p>
      <div style="margin-top:6px; color:#22c55e; font-weight:600;">Start Test ‚Üí</div>
    </a>

    <!-- Test 4 -->
    <a href="module12-async-test-part4.html" style="
        text-decoration:none;
        background:rgba(15,23,42,0.9);
        padding:14px;
        border-radius:18px;
        border:1px solid rgba(249,115,22,0.4);
        display:block;
        box-shadow:0 8px 20px rgba(0,0,0,0.55);
        transition:0.25s;"
      onmouseover="this.style.transform='scale(1.03)'; this.style.borderColor='rgba(249,115,22,0.9)'"
      onmouseout ="this.style.transform='scale(1)';   this.style.borderColor='rgba(249,115,22,0.4)'">

      <h3 style="color:#bfdbfe; margin-bottom:6px;">üß™ Test Part 4 ‚Äî async/await & fetch()</h3>
      <p style="color:#9ca3af; font-size:0.9rem;">await ¬∑ try/catch ¬∑ Sequential vs Parallel ¬∑ API Calls</p>
      <div style="margin-top:6px; color:#fb923c; font-weight:600;">Start Test ‚Üí</div>
    </a>

  </div>
</div>
<!-- END TEST LINKS SECTION -->


  <!-- MAIN -->
  <main>

    <!-- LEFT: MAIN CONTENT -->
    <section>

      <!-- 1. Mental model -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 1 ¬∑ Big Picture</div>
        <h2>1. Why Asynchronous JavaScript Matters</h2>
        <p class="lead">
          In real web apps, JavaScript is constantly waiting for things: server responses, timers,
          user input, file reads, etc. Asynchronous patterns help us do this waiting <strong>without
          freezing the page</strong>.
        </p>
        <ul>
          <li><strong>Synchronous (sync):</strong> One thing at a time, in order.</li>
          <li><strong>Asynchronous (async):</strong> Start something, continue other work, and handle the result later.</li>
          <li><strong>Key idea:</strong> JavaScript has a single main thread, so we don‚Äôt block it.</li>
        </ul>

        <h3>1.1 Sync vs Async: Simple Example</h3>
        <pre><code>// Synchronous
console.log("Start");
for (let i = 0; i &lt; 1e9; i++) {} // heavy work
console.log("End");

// Asynchronous with timer
console.log("Start");
setTimeout(() =&gt; {
  console.log("Timer done");
}, 1000);
console.log("End");</code></pre>

        <p>
          In the async version, ‚ÄúEnd‚Äù prints <em>before</em> ‚ÄúTimer done‚Äù. The timer callback is handled
          later by the event loop.
        </p>

        <h3>1.2 The Event Loop (High-level)</h3>
        <div class="diagram">
Call Stack   Web APIs       Callback Queue     Microtask Queue
----------   --------       --------------     ----------------
   |            |                  |                    |
   v            v                  v                    v

[ main() ]   [ setTimeout ]   [ timer callback ]   [ promise .then ]

// Event loop keeps checking:
// 1) If call stack is empty
// 2) Then runs microtasks (promises)
// 3) Then runs callbacks from callback queue (timers, DOM events...)
        </div>

        <div class="note">
          At this level, students should remember:  
          <strong>‚ÄúJavaScript is single-threaded, but we use async APIs + event loop to avoid blocking.‚Äù</strong>
        </div>
      </article>

      <!-- 2. Callbacks -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 2 ¬∑ Callbacks</div>
        <h2>2. Callbacks &amp; Callback Hell</h2>
        <p class="lead">
          A <strong>callback</strong> is a function that you pass to another function so it can be
          called later when some work is done.
        </p>

        <h3>2.1 Basic Callback Example</h3>
        <pre><code>function greetLater(name, callback) {
  console.log("Preparing greeting...");

  setTimeout(() =&gt; {
    const message = `Hello, ${name}!`;
    callback(message); // call the callback
  }, 1000);
}

greetLater("Sukanta", (msg) =&gt; {
  console.log("Received:", msg);
});</code></pre>

        <p>
          Here <code>(msg) =&gt; {...}</code> is the callback passed into <code>greetLater</code>.
        </p>

        <h3>2.2 Callback Hell (Nested Callbacks)</h3>
        <pre><code>getUser(1, (user) =&gt; {
  getPosts(user.id, (posts) =&gt; {
    getComments(posts[0].id, (comments) =&gt; {
      console.log("Done:", comments);
    }, errorHandler);
  }, errorHandler);
}, errorHandler);</code></pre>

        <div class="diagram">
// Visual shape of callback hell
start
 ‚îî‚îÄ&gt; step 1
      ‚îî‚îÄ&gt; step 2
           ‚îî‚îÄ&gt; step 3
                ‚îî‚îÄ&gt; ...
        </div>

        <div class="warning">
          Problems with callback hell:
          <ul>
            <li>Hard to read and reason about.</li>
            <li>Error handling is scattered.</li>
            <li>Reusability drops as nesting grows.</li>
          </ul>
          This is why Promises were introduced.
        </div>
      </article>

      <!-- 3. Promises basics -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 3 ¬∑ Promises</div>
        <h2>3. Promises ‚Äî A Cleaner Way</h2>
        <p class="lead">
          A <strong>Promise</strong> represents a value that may be available <em>now</em>, <em>later</em>, or <em>never</em>.
          It has 3 states: <strong>pending</strong>, <strong>fulfilled</strong>, <strong>rejected</strong>.
        </p>

        <h3>3.1 Creating a Promise</h3>
        <pre><code>const fetchData = () =&gt; {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      const success = true;
      if (success) {
        resolve("Data loaded");
      } else {
        reject("Something went wrong");
      }
    }, 1000);
  });
};</code></pre>

        <h3>3.2 Consuming a Promise with <code>.then()</code> &amp; <code>.catch()</code></h3>
        <pre><code>fetchData()
  .then((result) =&gt; {
    console.log(result); // "Data loaded"
  })
  .catch((error) =&gt; {
    console.error(error);
  })
  .finally(() =&gt; {
    console.log("Finished (success or failure).");
  });</code></pre>

        <div class="tip">
          The <strong>microtask queue</strong> runs promise callbacks (<code>.then</code>, <code>.catch</code>, <code>.finally</code>)
          before normal callbacks (like <code>setTimeout</code>) when the call stack is clear.
        </div>

        <h3>3.3 Converting a Callback Function to a Promise</h3>
        <pre><code>// Original callback-based function
function loadScript(src, callback) {
  const script = document.createElement("script");
  script.src = src;
  script.onload = () =&gt; callback(null, src);
  script.onerror = () =&gt; callback("Error loading script");
  document.head.appendChild(script);
}

// Promise wrapper
function loadScriptPromise(src) {
  return new Promise((resolve, reject) =&gt; {
    loadScript(src, (err, result) =&gt; {
      if (err) reject(err);
      else resolve(result);
    });
  });
}</code></pre>
      </article>

      <!-- 4. Promise chaining & combinators -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 4 ¬∑ Chaining &amp; Combinators</div>
        <h2>4. Promise Chaining &amp; Combining Multiple Promises</h2>

        <h3>4.1 Promise Chaining (Sequential Steps)</h3>
        <pre><code>loginUser("user@example.com", "pass123")
  .then(user =&gt; getUserCourses(user.id))
  .then(courses =&gt; getCourseDetails(courses[0]))
  .then(details =&gt; {
    console.log("First course details:", details);
  })
  .catch(err =&gt; {
    console.error("Error in chain:", err);
  });</code></pre>

        <p>
          Each <code>.then</code> returns a new promise, allowing clean left-to-right flow instead of deep nesting.
        </p>

        <h3>4.2 <code>Promise.all()</code> ‚Äî Run in Parallel</h3>
        <pre><code>const p1 = fetch("/api/course");
const p2 = fetch("/api/instructor");
const p3 = fetch("/api/reviews");

Promise.all([p1, p2, p3])
  .then(([courseRes, instructorRes, reviewsRes]) =&gt; {
    // handle all responses
  })
  .catch(err =&gt; {
    console.error("At least one request failed:", err);
  });</code></pre>

        <h3>4.3 <code>Promise.race()</code> &amp; <code>Promise.allSettled()</code> (Concept)</h3>
        <ul>
          <li><code>Promise.race(promises)</code> ‚Üí resolves/rejects with the <em>first</em> finished promise.</li>
          <li><code>Promise.allSettled(promises)</code> ‚Üí waits for all to finish, returns status for each.</li>
          <li><code>Promise.any(promises)</code> ‚Üí resolves with the first <em>fulfilled</em> promise (ignores rejections).</li>
        </ul>

        <div class="note">
          In frontend apps, <code>Promise.all</code> is great for loading multiple data blocks in parallel (e.g., course +
          instructor + reviews) before rendering the page.
        </div>
      </article>

      <!-- 5. async/await -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 5 ¬∑ async / await</div>
        <h2>5. Async/Await ‚Äî Writing Async Code Like Sync</h2>
        <p class="lead">
          <code>async</code> / <code>await</code> is syntax sugar on top of Promises. It lets you write asynchronous
          code that <strong>looks like</strong> synchronous code.
        </p>

        <h3>5.1 Basic Example</h3>
        <pre><code>function loadData() {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; resolve("Loaded"), 1000);
  });
}

async function main() {
  console.log("Start");
  const result = await loadData(); // waits without blocking the main thread
  console.log(result);
  console.log("End");
}

main();</code></pre>

        <p>
          The function marked <code>async</code> automatically returns a Promise. Inside it, <code>await</code> pauses
          execution of that function until the Promise settles.
        </p>

        <h3>5.2 Error Handling with <code>try...catch</code></h3>
        <pre><code>async function run() {
  try {
    const result = await mightFail();
    console.log("Result:", result);
  } catch (err) {
    console.error("Caught error:", err);
  } finally {
    console.log("Cleanup if required");
  }
}</code></pre>

        <h3>5.3 Sequential vs Parallel Awaits</h3>
        <pre><code>// Sequential (slow)
async function loadSequential() {
  const a = await fetch("/api/a");
  const b = await fetch("/api/b"); // waits for a to finish
}

// Parallel (better)
async function loadParallel() {
  const pA = fetch("/api/a");
  const pB = fetch("/api/b");

  const [a, b] = await Promise.all([pA, pB]);
}</code></pre>

        <div class="tip">
          Teach students:  
          <span class="tag-chip">Rule</span> Use <code>Promise.all</code> with <code>await</code> if tasks are independent
          and can run in parallel.
        </div>
      </article>

      <!-- 6. fetch basics -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 6 ¬∑ fetch()</div>
        <h2>6. Practical Async with <code>fetch()</code></h2>
        <p class="lead">
          The <code>fetch()</code> function is the standard way to make HTTP requests in modern browsers.
          It returns a Promise that resolves to a <code>Response</code> object.
        </p>

        <h3>6.1 Basic GET Request</h3>
        <pre><code>fetch("https://jsonplaceholder.typicode.com/posts/1")
  .then(response =&gt; response.json())
  .then(data =&gt; {
    console.log(data);
  })
  .catch(err =&gt; {
    console.error("Network error:", err);
  });</code></pre>

        <h3>6.2 Using <code>async/await</code> with fetch</h3>
        <pre><code>async function loadPost(id) {
  try {
    const response = await fetch(
      `https://jsonplaceholder.typicode.com/posts/${id}`
    );

    if (!response.ok) {
      throw new Error("HTTP error " + response.status);
    }

    const data = await response.json();
    console.log("Post:", data);
  } catch (err) {
    console.error("Failed to load post:", err.message);
  }
}

loadPost(1);</code></pre>

        <div class="warning">
          Important:
          <ul>
            <li><code>fetch()</code> only rejects on <strong>network errors</strong>, not on HTTP errors.</li>
            <li>Always check <code>response.ok</code> or <code>response.status</code> for 4xx/5xx errors.</li>
          </ul>
        </div>
      </article>

      <!-- 7. Mini-project 1: Weather app -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Mini Project 1</div>
        <h2>7. Mini Project ‚Äî Simple Weather App (Async/Await + fetch)</h2>
        <p class="lead">
          Build a small weather search that calls a public API and displays temperature information.
          This can be used as a full lab demo.
        </p>

        <h3>7.1 HTML Skeleton</h3>
        <pre><code>&lt;div id="weather-app"&gt;
  &lt;h2&gt;Weather Checker&lt;/h2&gt;
  &lt;input id="city-input" placeholder="Enter city" /&gt;
  &lt;button id="search-btn"&gt;Search&lt;/button&gt;
  &lt;div id="status"&gt;&lt;/div&gt;
  &lt;div id="result"&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>

        <h3>7.2 JavaScript Logic (Concept with Async/Await)</h3>
        <pre><code>const cityInput = document.getElementById("city-input");
const searchBtn = document.getElementById("search-btn");
const statusBox = document.getElementById("status");
const resultBox = document.getElementById("result");

// NOTE: Replace with your actual API and key.
const API_KEY = "YOUR_API_KEY_HERE";
const BASE_URL = "https://api.openweathermap.org/data/2.5/weather";

function setStatus(message) {
  statusBox.textContent = message;
}

function setResult(html) {
  resultBox.innerHTML = html;
}

async function fetchWeather(city) {
  try {
    setStatus("Loading...");
    setResult("");

    const url = `${BASE_URL}?q=${encodeURIComponent(city)}&units=metric&appid=${API_KEY}`;

    const response = await fetch(url);
    if (!response.ok) {
      throw new Error("City not found or API error");
    }

    const data = await response.json();
    const temp = data.main.temp;
    const feels = data.main.feels_like;
    const desc = data.weather[0].description;

    setResult(`
      &lt;p&gt;&lt;strong&gt;${city}&lt;/strong&gt;&lt;/p&gt;
      &lt;p&gt;Temperature: ${temp}&deg;C (feels like ${feels}&deg;C)&lt;/p&gt;
      &lt;p&gt;Condition: ${desc}&lt;/p&gt;
    `);
    setStatus("Done");
  } catch (err) {
    setStatus("Error");
    setResult(`&lt;p style="color:#f97373"&gt;${err.message}&lt;/p&gt;`);
  }
}

searchBtn.addEventListener("click", () =&gt; {
  const city = cityInput.value.trim();
  if (!city) {
    setResult("&lt;p style='color:#f97373'&gt;Please enter a city name.&lt;/p&gt;");
    return;
  }
  fetchWeather(city);
});</code></pre>

        <div class="tip">
          For classroom use, you can simulate the API by using <code>setTimeout</code> and static JSON
          first, then switch to a real weather API once students understand the flow.
        </div>
      </article>

      <!-- 8. Mini-project 2: Random users + Promise.all -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Mini Project 2</div>
        <h2>8. Mini Project ‚Äî Random User Cards (Parallel Fetch + Promise.all)</h2>
        <p class="lead">
          Load multiple random users in parallel and show their names and photos in cards.
        </p>

        <h3>8.1 HTML Skeleton</h3>
        <pre><code>&lt;div id="user-app"&gt;
  &lt;h2&gt;Random Students&lt;/h2&gt;
  &lt;button id="load-users"&gt;Load 3 Students&lt;/button&gt;
  &lt;div id="user-status"&gt;&lt;/div&gt;
  &lt;div id="user-list"&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>

        <h3>8.2 JavaScript Logic</h3>
        <pre><code>const loadBtn   = document.getElementById("load-users");
const userStatus = document.getElementById("user-status");
const userList   = document.getElementById("user-list");

function setUserStatus(msg) {
  userStatus.textContent = msg;
}

function createUserCard(user) {
  const fullName = `${user.name.first} ${user.name.last}`;
  return `
    &lt;div class="user-card"&gt;
      &lt;img src="${user.picture.medium}" alt="${fullName}" /&gt;
      &lt;p&gt;&lt;strong&gt;${fullName}&lt;/strong&gt;&lt;/p&gt;
      &lt;p&gt;${user.email}&lt;/p&gt;
    &lt;/div&gt;
  `;
}

async function loadRandomUsers(count = 3) {
  try {
    setUserStatus("Loading...");
    userList.innerHTML = "";

    const promises = [];
    for (let i = 0; i &lt; count; i++) {
      promises.push(fetch("https://randomuser.me/api/"));
    }

    const responses = await Promise.all(promises);
    const jsonPromises = responses.map(res =&gt; res.json());
    const results = await Promise.all(jsonPromises);

    const html = results
      .map(r =&gt; createUserCard(r.results[0]))
      .join("");

    userList.innerHTML = html;
    setUserStatus("Loaded");
  } catch (err) {
    setUserStatus("Error");
    userList.innerHTML = `&lt;p style="color:#f97373"&gt;Failed to load users.&lt;/p&gt;`;
  }
}

loadBtn.addEventListener("click", () =&gt; {
  loadRandomUsers(3);
});</code></pre>

        <div class="note">
          Concept highlights:
          <ul>
            <li>Multiple network calls in parallel using <code>Promise.all</code>.</li>
            <li>Nested <code>Promise.all</code> (responses ‚Üí JSON).</li>
            <li>Template literals to build dynamic cards.</li>
          </ul>
        </div>
      </article>

      <!-- 9. Mini-project 3: Async utilities -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Mini Project 3</div>
        <h2>9. Mini Project ‚Äî Async Utilities (Delay &amp; Parallel Tasks)</h2>
        <p class="lead">
          Build small helper functions that you can reuse across projects. This teaches students to
          think of async patterns as reusable utilities.
        </p>

        <h3>9.1 Promise-based Delay Function</h3>
        <pre><code>function delay(ms) {
  return new Promise(resolve =&gt; setTimeout(resolve, ms));
}

async function demoDelays() {
  console.log("Step 1");
  await delay(1000);
  console.log("Step 2 after 1 second");
  await delay(1000);
  console.log("Step 3 after another 1 second");
}

demoDelays();</code></pre>

        <h3>9.2 Running Independent Tasks in Parallel</h3>
        <pre><code>async function fetchCourse() {
  const res = await fetch("/api/course");
  return res.json();
}

async function fetchInstructor() {
  const res = await fetch("/api/instructor");
  return res.json();
}

async function loadDashboard() {
  try {
    const [course, instructor] = await Promise.all([
      fetchCourse(),
      fetchInstructor()
    ]);

    console.log("Course:", course);
    console.log("Instructor:", instructor);
  } catch (err) {
    console.error("Error loading dashboard:", err);
  }
}</code></pre>

        <div class="tip">
          Use these patterns later in your React / frontend projects:
          <ul>
            <li>Delay: to simulate loading or debounce user actions.</li>
            <li>Parallel tasks: to speed up dashboards and summary pages.</li>
          </ul>
        </div>
      </article>

      <!-- 10. Summary & practice -->
      <article class="card">
        <div class="step-label"><span class="step-dot"></span>Step 10 ¬∑ Summary & Practice</div>
        <h2>10. Summary &amp; Practice Tasks</h2>

        <h3>10.1 Concept Checklist</h3>
        <ul>
          <li>Difference between synchronous and asynchronous code.</li>
          <li>High-level understanding of the event loop, call stack, Web APIs, and queues.</li>
          <li>Callbacks and why callback hell is problematic.</li>
          <li>Promises: states, <code>.then()</code>, <code>.catch()</code>, <code>.finally()</code>.</li>
          <li>Promise chaining and <code>Promise.all</code>/<code>race</code>/<code>allSettled</code> (concept).</li>
          <li><code>async</code>/<code>await</code> syntax and <code>try...catch</code> for error handling.</li>
          <li>Using <code>fetch()</code> with <code>async/await</code> for API calls.</li>
          <li>Building small async projects: weather app, user loader, async utilities.</li>
        </ul>

        <h3>10.2 Practice Exercises</h3>
        <ol>
          <li>
            Rewrite a callback-based <code>setTimeout</code> chain into Promises, then into <code>async/await</code>.
          </li>
          <li>
            Create a function <code>getJSON(url)</code> that wraps <code>fetch(url)</code> with proper error handling
            and returns parsed JSON (or throws an error).
          </li>
          <li>
            Build a ‚ÄúJoke Generator‚Äù button that fetches a random joke from any public API and shows it on the page.
          </li>
          <li>
            Add a ‚ÄúLoading...‚Äù indicator to the Random Users mini project and hide it when data is ready or on error.
          </li>
          <li>
            Use <code>Promise.all</code> to fetch 5 posts from an API simultaneously and render the titles in a list.
          </li>
          <li>
            Create a function <code>withRetry(asyncFn, retries)</code> that retries an async function a few times
            before finally throwing an error.
          </li>
          <li>
            Draw the flow of: <code>fetch().then().then()</code> and <code>async/await</code> version side-by-side and
            explain to a friend which you prefer and why.
          </li>
        </ol>

        <div class="note">
          You can pair this module with a dedicated worksheet (MCQs + output questions) just like Module 11,
          to make students fully exam-ready on async JavaScript.
        </div>
      </article>

    </section>

    <!-- RIGHT: SIDEBAR -->
    <aside>

      <div class="side-card">
        <h2>Async JS Quick Reference</h2>
        <ul>
          <li><strong>Callback:</strong> <code>doSomething(() =&gt; {...})</code></li>
          <li><strong>Promise:</strong> <code>new Promise((res,rej) =&gt; {...})</code></li>
          <li><strong>Then:</strong> <code>promise.then(onFulfilled).catch(onRejected)</code></li>
          <li><strong>async:</strong> marks a function that returns a Promise.</li>
          <li><strong>await:</strong> pauses inside async function until Promise settles.</li>
          <li><strong>fetch:</strong> returns a Promise that resolves to <code>Response</code>.</li>
          <li><strong>Error handling:</strong> <code>.catch()</code> or <code>try...catch</code>.</li>
          <li><strong>Parallel:</strong> <code>await Promise.all([...])</code>.</li>
        </ul>
      </div>

      <div class="side-card">
        <h2>Teacher Notes for Module 12</h2>
        <ul>
          <li>Start with a <strong>visual event loop explanation</strong> on whiteboard.</li>
          <li>Show <strong>console logs with setTimeout</strong> to break intuition.</li>
          <li>Move from <span class="tag-chip">Callback</span> ‚Üí <span class="tag-chip">Promise</span> ‚Üí <span class="tag-chip">Async/Await</span> using the <em>same example</em>.</li>
          <li>Demonstrate a real <code>fetch()</code> call in DevTools console.</li>
          <li>Use the Weather &amp; Random User projects as guided labs.</li>
          <li>Encourage students to read error messages carefully and debug step-by-step.</li>
        </ul>
      </div>

    </aside>

  </main>

  <!-- FOOTER: ORGANISATION DETAILS -->
  <footer>
    <div class="org-grid">
      <div>
        <div class="org-name">Coder &amp; AccoTax</div>
        <div class="org-sub">Coding, Accounts &amp; Taxation Learning Hub</div>
        25(10/A) Shibtala Road, PO ‚Äì N. C. Pukur, Barrackpore<br>
        West Bengal, India
      </div>

      <div>
        <strong>Website:</strong>
        <a href="https://www.codernaccotax.co.in">www.codernaccotax.co.in</a><br>
        <strong>Phone:</strong> +91 7003756860<br>
        <strong>Course Author:</strong> Sukanta Hui<br>
        <strong>JavaScript Track:</strong> Basic ‚Üí Pro Level
      </div>
    </div>

    <div class="org-small">
      This Asynchronous JavaScript module is part of the ‚ÄúJavaScript from Basic to Pro‚Äù series
      for Coder &amp; AccoTax students. Use it along with hands-on practice and projects.
    </div>
  </footer>

</div>
</body>
</html>
